<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Frog Traffic Game</title>
    <style>
        body {
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #87CEEB, #98FB98);
            font-family: Arial, sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
        }
        
        .game-container {
            background: #333;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 0 20px rgba(0,0,0,0.3);
        }
        
        canvas {
            border: 3px solid #fff;
            border-radius: 8px;
            background: #228B22;
        }
        
        .controls {
            text-align: center;
            margin-top: 15px;
            color: white;
        }
        
        .score {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 10px;
        }
        
        .instructions {
            font-size: 14px;
            opacity: 0.8;
        }
        
        .game-over {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(255, 0, 0, 0.9);
            color: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            font-size: 20px;
            font-weight: bold;
        }
        
        .restart-btn {
            background: #4CAF50;
            color: white;
            border: none;
            padding: 10px 20px;
            font-size: 16px;
            border-radius: 5px;
            cursor: pointer;
            margin-top: 10px;
        }
        
        .restart-btn:hover {
            background: #45a049;
        }
    </style>
</head>
<body>
    <div class="game-container">
        <canvas id="gameCanvas" width="600" height="400"></canvas>
        <div class="controls">
            <div class="score">Score: <span id="score">0</span> | Lives: <span id="lives">3</span></div>
            <div class="instructions">Use ARROW KEYS or WASD to move the frog. Avoid the cars!</div>
        </div>
        <div id="gameOverDiv" class="game-over" style="display: none;">
            <div>Game Over!</div>
            <div>Final Score: <span id="finalScore">0</span></div>
            <button class="restart-btn" onclick="restartGame()">Play Again</button>
        </div>
    </div>

    <script>
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        
        // Game variables
        let gameRunning = true;
        let score = 0;
        let lives = 3;
        
        // Frog object
        const frog = {
            x: 280,
            y: 360,
            width: 40,
            height: 40,
            speed: 40
        };
        
        // Cars array
        let cars = [];
        
        // Game lanes
        const lanes = [
            { y: 280, speed: 2, direction: 1, color: '#FF6B6B' },
            { y: 240, speed: 3, direction: -1, color: '#4ECDC4' },
            { y: 200, speed: 2.5, direction: 1, color: '#45B7D1' },
            { y: 160, speed: 3.5, direction: -1, color: '#FFA07A' },
            { y: 120, speed: 2, direction: 1, color: '#98D8C8' },
            { y: 80, speed: 4, direction: -1, color: '#F7DC6F' }
        ];
        
        // Initialize cars
        function initCars() {
            cars = [];
            lanes.forEach((lane, index) => {
                const carCount = Math.floor(Math.random() * 3) + 2;
                for (let i = 0; i < carCount; i++) {
                    cars.push({
                        x: lane.direction === 1 ? -100 - (i * 150) : canvas.width + (i * 150),
                        y: lane.y,
                        width: 60,
                        height: 30,
                        speed: lane.speed,
                        direction: lane.direction,
                        color: lane.color,
                        lane: index
                    });
                }
            });
        }
        
        // Draw frog
        function drawFrog() {
            ctx.fillStyle = '#32CD32';
            ctx.fillRect(frog.x, frog.y, frog.width, frog.height);
            
            // Frog eyes
            ctx.fillStyle = '#000';
            ctx.fillRect(frog.x + 8, frog.y + 5, 8, 8);
            ctx.fillRect(frog.x + 24, frog.y + 5, 8, 8);
            
            // Frog mouth
            ctx.fillStyle = '#FF69B4';
            ctx.fillRect(frog.x + 15, frog.y + 25, 10, 3);
        }
        
        // Draw cars
        function drawCars() {
            cars.forEach(car => {
                // Car body
                ctx.fillStyle = car.color;
                ctx.fillRect(car.x, car.y, car.width, car.height);
                
                // Car windows
                ctx.fillStyle = '#87CEEB';
                ctx.fillRect(car.x + 10, car.y + 5, car.width - 20, car.height - 15);
                
                // Car wheels
                ctx.fillStyle = '#000';
                ctx.fillRect(car.x + 5, car.y + 25, 10, 8);
                ctx.fillRect(car.x + car.width - 15, car.y + 25, 10, 8);
            });
        }
        
        // Draw road
        function drawRoad() {
            // Grass areas
            ctx.fillStyle = '#228B22';
            ctx.fillRect(0, 0, canvas.width, 40);
            ctx.fillRect(0, 320, canvas.width, 80);
            
            // Road
            ctx.fillStyle = '#555';
            ctx.fillRect(0, 40, canvas.width, 280);
            
            // Road lines
            ctx.fillStyle = '#FFF';
            for (let i = 0; i < 6; i++) {
                const y = 85 + (i * 40);
                ctx.fillRect(0, y, canvas.width, 2);
            }
            
            // Dashed center lines
            ctx.fillStyle = '#FFD700';
            for (let lane = 0; lane < 6; lane++) {
                const y = 100 + (lane * 40);
                for (let x = 0; x < canvas.width; x += 40) {
                    ctx.fillRect(x, y, 20, 2);
                }
            }
        }
        
        // Update cars
        function updateCars() {
            cars.forEach(car => {
                car.x += car.speed * car.direction;
                
                // Reset car position when it goes off screen
                if (car.direction === 1 && car.x > canvas.width + 100) {
                    car.x = -100 - Math.random() * 200;
                } else if (car.direction === -1 && car.x < -160) {
                    car.x = canvas.width + Math.random() * 200;
                }
            });
        }
        
        // Check collisions
        function checkCollisions() {
            cars.forEach(car => {
                if (frog.x < car.x + car.width &&
                    frog.x + frog.width > car.x &&
                    frog.y < car.y + car.height &&
                    frog.y + frog.height > car.y) {
                    
                    lives--;
                    if (lives <= 0) {
                        gameOver();
                    } else {
                        // Reset frog position
                        frog.x = 280;
                        frog.y = 360;
                    }
                }
            });
        }
        
        // Check if frog reached the top
        function checkWin() {
            if (frog.y <= 40) {
                score += 100;
                frog.x = 280;
                frog.y = 360;
                
                // Increase difficulty slightly
                cars.forEach(car => {
                    car.speed += 0.1;
                });
            }
        }
        
        // Game over
        function gameOver() {
            gameRunning = false;
            document.getElementById('finalScore').textContent = score;
            document.getElementById('gameOverDiv').style.display = 'block';
        }
        
        // Restart game
        function restartGame() {
            gameRunning = true;
            score = 0;
            lives = 3;
            frog.x = 280;
            frog.y = 360;
            initCars();
            document.getElementById('gameOverDiv').style.display = 'none';
            gameLoop();
        }
        
        // Handle keyboard input
        document.addEventListener('keydown', (e) => {
            if (!gameRunning) return;
            
            switch(e.key.toLowerCase()) {
                case 'arrowup':
                case 'w':
                    if (frog.y > 0) frog.y -= frog.speed;
                    break;
                case 'arrowdown':
                case 's':
                    if (frog.y < canvas.height - frog.height) frog.y += frog.speed;
                    break;
                case 'arrowleft':
                case 'a':
                    if (frog.x > 0) frog.x -= frog.speed;
                    break;
                case 'arrowright':
                case 'd':
                    if (frog.x < canvas.width - frog.width) frog.x += frog.speed;
                    break;
            }
        });
        
        // Main game loop
        function gameLoop() {
            if (!gameRunning) return;
            
            // Clear canvas
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            // Draw everything
            drawRoad();
            updateCars();
            drawCars();
            drawFrog();
            
            // Check game logic
            checkCollisions();
            checkWin();
            
            // Update UI
            document.getElementById('score').textContent = score;
            document.getElementById('lives').textContent = lives;
            
            requestAnimationFrame(gameLoop);
        }
        
        // Initialize and start game
        initCars();
        gameLoop();
    </script>
</body>
</html>